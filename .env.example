# Webhook Router Configuration Example
# Copy this file to .env and update with your values

# Server Configuration
PORT=8080

# JWT Authentication (REQUIRED - minimum 32 characters)
JWT_SECRET=your-secret-key-minimum-32-characters-change-this

# Database Configuration
DATABASE_TYPE=sqlite                    # Options: sqlite, postgres, postgresql
DATABASE_PATH=./webhook_router.db       # For SQLite only

# PostgreSQL Configuration (if DATABASE_TYPE=postgres)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=webhook_router
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your-postgres-password
POSTGRES_SSL_MODE=disable               # Options: disable, require, verify-ca, verify-full

# Redis Configuration (Optional - for distributed features)
REDIS_ADDRESS=localhost:6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_POOL_SIZE=10

# Rate Limiting Configuration
RATE_LIMIT_ENABLED=true
RATE_LIMIT_DEFAULT=100                 # Requests per window
RATE_LIMIT_WINDOW=60s                  # Time window

# Message Broker Configuration (Optional)
RABBITMQ_URL=amqp://guest:guest@localhost:5672/
DEFAULT_QUEUE=webhooks

# Logging Configuration
LOG_LEVEL=info                         # Options: debug, info, warn, error

# Encryption Configuration (Optional - for sensitive data encryption)
CONFIG_ENCRYPTION_KEY=your-32-byte-encryption-key-change-this

# OAuth2 Configuration (Optional - for OAuth2-enabled triggers)
# Google OAuth2 (for Gmail IMAP, Google Calendar, etc.)
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# Microsoft OAuth2 (for Outlook, Office 365, etc.)
MICROSOFT_CLIENT_ID=your-microsoft-client-id
MICROSOFT_CLIENT_SECRET=your-microsoft-client-secret

# Broker-specific Configuration (Optional)
# AWS SQS/SNS
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key

# Google Cloud Pub/Sub
GCP_PROJECT_ID=your-gcp-project-id
GCP_TOPIC_ID=your-topic-id
GCP_SUBSCRIPTION_ID=your-subscription-id
GCP_CREDENTIALS_PATH=/path/to/service-account-key.json  # Or use GCP_CREDENTIALS_JSON
# GCP_CREDENTIALS_JSON={"type":"service_account",...}   # Full JSON credentials
GCP_CREATE_SUBSCRIPTION=true                             # Auto-create subscription if missing
GCP_ENABLE_ORDERING=false                                # Enable message ordering
GCP_ORDERING_KEY=                                        # Ordering key for ordered messages

# Kafka
KAFKA_BROKERS=localhost:9092
KAFKA_SASL_USERNAME=
KAFKA_SASL_PASSWORD=

# Webhook Router Specific Settings
# Maximum request body size (in bytes)
MAX_BODY_SIZE=10485760                # 10MB default

# Request timeout for webhook processing
WEBHOOK_TIMEOUT=30s

# Enable/disable specific features
ENABLE_TRIGGERS=true
ENABLE_PIPELINES=true
ENABLE_DISTRIBUTED=true                # Requires Redis

# Development Settings
DEV_MODE=false                         # Enable development mode with relaxed security
ENABLE_SWAGGER=true                    # Enable Swagger UI at /swagger

# Health Check Settings
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=5s

# Metrics and Monitoring (Optional)
METRICS_ENABLED=false
METRICS_PORT=9090
PROMETHEUS_ENABLED=false

# TLS/SSL Configuration (Optional)
TLS_ENABLED=false
TLS_CERT_FILE=/path/to/cert.pem
TLS_KEY_FILE=/path/to/key.pem

# CORS Configuration
CORS_ENABLED=true
CORS_ALLOWED_ORIGINS=*
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=*

# Webhook Retry Configuration
WEBHOOK_RETRY_ENABLED=true
WEBHOOK_RETRY_COUNT=3
WEBHOOK_RETRY_DELAY=5s
WEBHOOK_RETRY_MAX_DELAY=60s

# Cleanup and Maintenance
CLEANUP_ENABLED=true
CLEANUP_INTERVAL=24h                   # How often to run cleanup
CLEANUP_RETENTION_DAYS=30              # Keep webhook logs for this many days

# Performance Tuning
WORKER_POOL_SIZE=100                   # Number of concurrent webhook processors
DATABASE_MAX_CONNECTIONS=25
DATABASE_MAX_IDLE_CONNECTIONS=5
DATABASE_CONNECTION_MAX_LIFETIME=1h

# Debug Options
DEBUG_SQL=false                        # Log SQL queries
DEBUG_HTTP=false                       # Log HTTP requests/responses
DEBUG_PERFORMANCE=false                # Log performance metrics